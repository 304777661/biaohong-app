(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/company-news"],{"2e22":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"uni-info-list",props:{data:{type:Object,default:function(t){return{}}}},computed:{isImgRight:function(){return 2===this.data.article_type},isImgLeft:function(){return 1===this.data.article_type},showImg:function(){return this.data.image_list||this.data.image_url}},methods:{close:function(t){this.$emit("close")},bindClick:function(){this.$emit("click")}}};e.default=i},"3d15":function(t,e,n){"use strict";n.r(e);var i=n("c0bb"),a=n("5ebc");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("b722");var r=n("2877"),c=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports},"533b":function(t,e,n){"use strict";n.r(e);var i=n("eae3"),a=n("e2ca");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("c4e8");var r=n("2877"),c=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports},"5ebc":function(t,e,n){"use strict";n.r(e);var i=n("ce38"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},"6b91":function(t,e,n){},"8fe0":function(t,e,n){"use strict";n("a0da");var i=s(n("b0ce")),a=s(n("3d15"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(a.default))},b722:function(t,e,n){"use strict";var i=n("6b91"),a=n.n(i);a.a},c0bb:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"uni-tab-bar"},[n("view",{staticClass:"uni-swiper-tab",attrs:{id:"tab-bar","scroll-x":"","scroll-left":t.scrollLeft}},t._l(t.tabBars,function(e,i){return n("view",{key:e.ref,class:["swiper-tab-list",t.tabIndex==i?"active":""],attrs:{id:e.ref,"data-current":i,eventid:"0d9e7b20-0-"+i},on:{click:function(e){t.tapTab(i)}}},[t._v(t._s(e.name))])})),n("swiper",{staticClass:"swiper-box",attrs:{current:t.tabIndex,duration:"300",eventid:"0d9e7b20-3"},on:{change:t.changeTab}},t._l(t.newsList,function(e,i){return n("swiper-item",{key:i,attrs:{mpcomid:"0d9e7b20-2-"+i}},[n("scroll-view",{staticClass:"list",attrs:{"scroll-y":"",eventid:"0d9e7b20-2-"+i},on:{scrolltolower:function(e){t.loadMore(i)}}},[t._l(e.data,function(e,a){return n("block",{key:a},[n("uni-info-list",{attrs:{data:e,eventid:"0d9e7b20-1-"+i+"-"+a,mpcomid:"0d9e7b20-0-"+i+"-"+a},on:{close:function(e){t.dislike(i,a)},click:function(n){t.goDetail(e)}}})],1)}),n("view",{staticClass:"uni-tab-bar-loading"},[n("uni-load-more",{attrs:{loadingType:e.loadingText,contentText:t.loadingText,mpcomid:"0d9e7b20-1-"+i}})],1)],2)],1)}))],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},c4e8:function(t,e,n){"use strict";var i=n("f6a5"),a=n.n(i);a.a},ce38:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=c(n("a34a")),a=c(n("533b")),s=c(n("6bff")),r=n("de37");function c(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,i,a,s,r){try{var c=t[s](r),o=c.value}catch(u){return void n(u)}c.done?e(o):Promise.resolve(o).then(i,a)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(i,a){var s=t.apply(e,n);function r(t){o(s,i,a,r,c,"next",t)}function c(t){o(s,i,a,r,c,"throw",t)}r(void 0)})}}var l={components:{uniInfoList:a.default,uniLoadMore:s.default},data:function(){return{loadingText:{contentdown:"上拉加载更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"},scrollLeft:0,refreshing:!1,refreshText:"下拉可以刷新",newsList:[],tabIndex:0,tabBars:[{name:"视频",id:0,ref:"company"},{name:"咨询",id:1,ref:"new"}]}},onLoad:function(){var t=this;this.tabBars.forEach(function(e){t.newsList.push({data:[],requestParams:{columnId:e.id,minId:0,pageSize:10,column:"id,post_id,title,author_name,cover,published_at,comments_count"},loadingText:"加载中..."})}),this.getList()},methods:{getList:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=this.newsList[this.tabIndex];i.requestParams.time=(new Date).getTime()+"",1===n&&(i.requestParams.minId=0),t.request({url:"https://unidemo.dcloud.net.cn/api/news",data:i.requestParams,success:function(t){if(200==t.statusCode){var a=t.data.map(function(t){return{id:t.id,article_type:1,datetime:(0,r.friendlyDate)(new Date(t.published_at.replace(/\-/g,"/")).getTime()),title:t.title,image_url:t.cover,source:t.author_name,comment_count:t.comments_count,post_id:t.post_id}});1===n?(i.data=a,e.refreshing=!1):a.forEach(function(t){i.data.push(t)}),i.requestParams.minId=a[a.length-1].id}}})},goDetail:function(e){t.navigateTo({url:"/pages/detail/detail?query="+encodeURIComponent(JSON.stringify(e))})},dislike:function(e,n){var i=this;t.showModal({content:"不感兴趣？",success:function(t){t.confirm&&i.newsList[e].data.splice(n,1)}})},loadMore:function(){this.getList(2)},changeTab:function(){var e=u(i.default.mark(function e(n){var a,s,r,c,o,u,l,f,d,h;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=n.detail.current,!this.isClickChange){e.next=5;break}return this.tabIndex=a,this.isClickChange=!1,e.abrupt("return");case 5:return e.next=7,this.getElSize("tab-bar");case 7:s=e.sent,r=s.scrollLeft,c=0,o=0;case 11:if(!(o<a)){e.next=19;break}return e.next=14,this.getElSize(this.tabBars[o].ref);case 14:u=e.sent,c+=u.width;case 16:o++,e.next=11;break;case 19:return l=t.getSystemInfoSync().windowWidth,e.next=22,this.getElSize(this.tabBars[a].ref);case 22:f=e.sent,d=f.width,c+d-r>l&&(this.scrollLeft=c+d-l),c<r&&(this.scrollLeft=c),this.isClickChange=!1,this.tabIndex=a,h=this.newsList[this.tabIndex],0===h.data.length&&this.getList();case 30:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),getNodeSize:function(t){return new Promise(function(e,n){dom.getComponentRect(t,function(t){e(t.size)})})},onRefresh:function(t){this.refreshText="正在刷新...",this.refreshing=!0,this.getList()},getElSize:function(e){return new Promise(function(n,i){t.createSelectorQuery().select("#"+e).fields({size:!0,scrollOffset:!0},function(t){n(t)}).exec()})},tapTab:function(){var t=u(i.default.mark(function t(e){var n,a,s;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.tabIndex!==e){t.next=4;break}return t.abrupt("return",!1);case 4:return t.next=6,this.getElSize("tab-bar");case 6:n=t.sent,a=n.scrollLeft,this.scrollLeft=a,this.isClickChange=!0,this.tabIndex=e,s=this.newsList[this.tabIndex],0===s.data.length&&this.getList();case 13:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}};e.default=l}).call(this,n("649d")["default"])},e2ca:function(t,e,n){"use strict";n.r(e);var i=n("2e22"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},eae3:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",[n("view",{staticClass:"list-cell",attrs:{"hover-class":"uni-list-cell-hover",eventid:"1b5349d9-0"},on:{click:t.bindClick}},[n("text",{staticClass:"info-img"},[n("icon",{staticClass:"iconfont icon-xinwenzixun"})],1),t._m(0),n("text",{staticClass:"navigat-arrow"},[t._v("")])])])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"border-b info-title-box"},[n("text",{staticClass:"info-title f-28 f-b"},[t._v("苹果发布新产品了，赶紧来看看吧")]),n("text",{staticClass:"c-9 f-24"},[t._v("8.00")]),n("text",{staticClass:"c-6 f-24 txt-content"},[t._v("赶紧来看看吧赶紧来看看吧赶紧来看看吧赶紧来看看吧赶紧来看看吧")])])}];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},f6a5:function(t,e,n){}},[["8fe0","common/runtime","common/vendor"]]]);