(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/arround-list"],{"0dac":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",[n("view",{staticClass:"list-cell",attrs:{"hover-class":"uni-list-cell-hover",eventid:"31f180eb-0"},on:{click:t.bindClick}},[t.data.title?n("view",{staticClass:"media-list"},[n("view",{staticClass:"media-image-right media-image-left"},[n("view",{staticClass:"media-title media-titl2"},[n("text",{staticClass:"b"},[t._v(t._s(t.data.title))]),n("text",{staticClass:"f-16"},[n("icon",{staticClass:"iconfont icon-shoucang-tianchong icon-c-r f-16 m-0-5"}),n("text",{staticClass:"icon-c-r"},[t._v("4.5")]),n("text",{staticClass:"c-6 m-0-5"},[t._v("月销25225")]),n("text",{staticClass:"c-6 m-0-5"},[t._v("距我25225")])],1),n("text",{staticClass:"f-16"},[n("icon",{staticClass:"iconfont icon-dianpu f-16 m-0-5"}),n("text",{staticClass:"c-3 m-0-5"},[t._v("中式简餐")]),n("icon",{staticClass:"iconfont icon-shijian f-16 m-0-5"}),n("text",{staticClass:"c-6 m-0-5"},[t._v("营业时间：8:00-22:00")])],1)]),n("view",{staticClass:"image-section image-section-left"},[t.data.image_url?n("image",{staticClass:"image-list2",attrs:{src:t.data.image_url}}):t._e()])])]):t._e()])])},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"1b1d":function(t,e,n){"use strict";n.r(e);var i=n("0dac"),a=n("e2db");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("be21");var r=n("2877"),c=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports},"28c4":function(t,e,n){"use strict";var i=n("8a14"),a=n.n(i);a.a},"2b5d":function(t,e,n){},5590:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:"uni-tab-bar"},[n("view",{staticClass:"uni-swiper-tab",attrs:{id:"tab-bar","scroll-x":"","scroll-left":t.scrollLeft}},t._l(t.tabBars,function(e,i){return n("view",{key:e.ref,class:["swiper-tab-list",t.tabIndex==i?"active":""],attrs:{id:e.ref,"data-current":i,eventid:"30561d2a-0-"+i},on:{click:function(e){t.tapTab(i)}}},[t._v(t._s(e.name))])})),n("swiper",{staticClass:"swiper-box",attrs:{current:t.tabIndex,duration:"300",eventid:"30561d2a-3"},on:{change:t.changeTab}},t._l(t.newsList,function(e,i){return n("swiper-item",{key:i,attrs:{mpcomid:"30561d2a-2-"+i}},[n("scroll-view",{staticClass:"list",attrs:{"scroll-y":"",eventid:"30561d2a-2-"+i},on:{scrolltolower:function(e){t.loadMore(i)}}},[t._l(e.data,function(e,a){return n("block",{key:a},[n("uni-media-list",{attrs:{data:e,eventid:"30561d2a-1-"+i+"-"+a,mpcomid:"30561d2a-0-"+i+"-"+a},on:{close:function(e){t.dislike(i,a)},click:function(n){t.goDetail(e)}}})],1)}),n("view",{staticClass:"uni-tab-bar-loading"},[n("uni-load-more",{attrs:{loadingType:e.loadingText,contentText:t.loadingText,mpcomid:"30561d2a-1-"+i}})],1)],2)],1)}))],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"71b0":function(t,e,n){"use strict";n.r(e);var i=n("5590"),a=n("bac8");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("28c4");var r=n("2877"),c=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports},"8a14":function(t,e,n){},bac8:function(t,e,n){"use strict";n.r(e);var i=n("fe36"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},be21:function(t,e,n){"use strict";var i=n("2b5d"),a=n.n(i);a.a},dba8:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"uni-media-list",props:{data:{type:Object,default:function(t){return{}}}},computed:{isImgRight:function(){return 2===this.data.article_type},isImgLeft:function(){return 1===this.data.article_type},showImg:function(){return this.data.image_list||this.data.image_url}},methods:{close:function(t){this.$emit("close")},bindClick:function(){this.$emit("click")}}};e.default=i},e039:function(t,e,n){"use strict";n("a0da");var i=s(n("b0ce")),a=s(n("71b0"));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(a.default))},e2db:function(t,e,n){"use strict";n.r(e);var i=n("dba8"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},fe36:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=c(n("a34a")),a=c(n("1b1d")),s=c(n("6bff")),r=n("de37");function c(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,i,a,s,r){try{var c=t[s](r),o=c.value}catch(u){return void n(u)}c.done?e(o):Promise.resolve(o).then(i,a)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(i,a){var s=t.apply(e,n);function r(t){o(s,i,a,r,c,"next",t)}function c(t){o(s,i,a,r,c,"throw",t)}r(void 0)})}}var l={components:{uniMediaList:a.default,uniLoadMore:s.default},data:function(){return{loadingText:{contentdown:"上拉加载更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"},scrollLeft:0,refreshing:!1,refreshText:"下拉可以刷新",newsList:[],tabIndex:0,tabBars:[{name:"推荐",id:0,ref:"new"},{name:"超市",id:23,ref:"company"},{name:"餐厅",id:223,ref:"content"},{name:"4S店",id:225,ref:"content"}]}},onLoad:function(){var t=this;this.tabBars.forEach(function(e){t.newsList.push({data:[],requestParams:{columnId:e.id,minId:0,pageSize:10,column:"id,post_id,title,author_name,cover,published_at,comments_count"},loadingText:"加载中..."})}),this.getList()},methods:{getList:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=this.newsList[this.tabIndex];i.requestParams.time=(new Date).getTime()+"",1===n&&(i.requestParams.minId=0),t.request({url:"https://unidemo.dcloud.net.cn/api/news",data:i.requestParams,success:function(t){if(200==t.statusCode){var a=t.data.map(function(t){return{id:t.id,article_type:1,datetime:(0,r.friendlyDate)(new Date(t.published_at.replace(/\-/g,"/")).getTime()),title:t.title,image_url:t.cover,source:t.author_name,comment_count:t.comments_count,post_id:t.post_id}});1===n?(i.data=a,e.refreshing=!1):a.forEach(function(t){i.data.push(t)}),i.requestParams.minId=a[a.length-1].id}}})},goDetail:function(e){t.navigateTo({url:"/pages/detail/detail?query="+encodeURIComponent(JSON.stringify(e))})},dislike:function(e,n){var i=this;t.showModal({content:"不感兴趣？",success:function(t){t.confirm&&i.newsList[e].data.splice(n,1)}})},loadMore:function(){this.getList(2)},changeTab:function(){var e=u(i.default.mark(function e(n){var a,s,r,c,o,u,l,d,f,h;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=n.detail.current,!this.isClickChange){e.next=5;break}return this.tabIndex=a,this.isClickChange=!1,e.abrupt("return");case 5:return e.next=7,this.getElSize("tab-bar");case 7:s=e.sent,r=s.scrollLeft,c=0,o=0;case 11:if(!(o<a)){e.next=19;break}return e.next=14,this.getElSize(this.tabBars[o].ref);case 14:u=e.sent,c+=u.width;case 16:o++,e.next=11;break;case 19:return l=t.getSystemInfoSync().windowWidth,e.next=22,this.getElSize(this.tabBars[a].ref);case 22:d=e.sent,f=d.width,c+f-r>l&&(this.scrollLeft=c+f-l),c<r&&(this.scrollLeft=c),this.isClickChange=!1,this.tabIndex=a,h=this.newsList[this.tabIndex],0===h.data.length&&this.getList();case 30:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),getNodeSize:function(t){return new Promise(function(e,n){dom.getComponentRect(t,function(t){e(t.size)})})},onRefresh:function(t){this.refreshText="正在刷新...",this.refreshing=!0,this.getList()},getElSize:function(e){return new Promise(function(n,i){t.createSelectorQuery().select("#"+e).fields({size:!0,scrollOffset:!0},function(t){n(t)}).exec()})},tapTab:function(){var t=u(i.default.mark(function t(e){var n,a,s;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.tabIndex!==e){t.next=4;break}return t.abrupt("return",!1);case 4:return t.next=6,this.getElSize("tab-bar");case 6:n=t.sent,a=n.scrollLeft,this.scrollLeft=a,this.isClickChange=!0,this.tabIndex=e,s=this.newsList[this.tabIndex],0===s.data.length&&this.getList();case 13:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}};e.default=l}).call(this,n("649d")["default"])}},[["e039","common/runtime","common/vendor"]]]);